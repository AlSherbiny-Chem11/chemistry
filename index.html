<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø±Ø¨ÙŠÙ†ÙŠ Ù„Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ | Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        
        :root {
            --gold: #c5a059;
            --dark: #080c14;
            --card: #111827;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: radial-gradient(circle at top, #1e293b 0%, var(--dark) 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Ø§Ù„Ù…Ù†ÙŠÙˆ - ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø´ÙØ§ÙÙŠØ© ÙˆØ§Ù„Ù„ÙˆÙ† */
        #drop-menu {
            background-color: #111827 !important; /* Ø£Ø³ÙˆØ¯ ØµÙ„Ø¨ */
            border: 2px solid var(--gold);
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.9);
            display: none;
            position: absolute;
            top: 65px;
            right: 0;
            width: 240px;
            z-index: 9999;
        }

        /* ÙƒØ±ÙˆØª Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„ÙØ®Ù…Ø© */
        .lesson-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 30px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
        }
        .lesson-card:hover {
            transform: translateY(-12px);
            border-color: var(--gold);
            background: rgba(197, 160, 89, 0.05);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        }

        .btn-gold {
            background: linear-gradient(135deg, #c5a059 0%, #edd3a1 100%);
            color: #080c14;
            font-weight: 900;
            transition: 0.3s;
        }
        .btn-gold:active { transform: scale(0.95); }

        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ù„ÙˆØ¯Ø± */
        .loader {
            width: 45px; height: 45px;
            border: 5px solid var(--gold);
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <section id="auth-screen" class="fixed inset-0 z-[9999] flex items-center justify-center bg-[#080c14]">
        <div class="text-center p-8 animate__animated animate__fadeIn">
            <div class="w-24 h-24 bg-[#c5a059] rounded-[35px] mx-auto mb-8 flex items-center justify-center shadow-2xl animate__animated animate__pulse animate__infinite">
                <i class="fas fa-atom text-4xl text-black"></i>
            </div>
            <h1 class="text-3xl font-black mb-2 tracking-tight">Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø´Ø±Ø¨ÙŠÙ†ÙŠ</h1>
            <p class="text-slate-500 mb-10 font-bold">Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„Ø­Ø¯ÙŠØ« 2026</p>
            <button onclick="login()" class="btn-gold px-12 py-5 rounded-2xl flex items-center gap-3 text-lg shadow-xl shadow-gold/10">
                <i class="fab fa-google"></i> Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ ÙŠØ§ Ø¨Ø·Ù„
            </button>
        </div>
    </section>

    <header id="app-header" class="hidden sticky top-0 z-[1000] border-b border-white/5 bg-[#0f172a]/95 backdrop-blur-md">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            
            <div class="flex items-center gap-3 relative">
                <div class="flex items-center gap-3 cursor-pointer group" onclick="toggleMenu()">
                    <img id="user-avatar" class="w-11 h-11 rounded-2xl border-2 border-[#c5a059] shadow-lg transition group-hover:rotate-6">
                    <span id="user-first-name" class="hidden md:block text-sm font-black text-white"></span>
                    <i class="fas fa-chevron-down text-[10px] text-[#c5a059]"></i>
                </div>

                <div id="drop-menu" class="p-2 animate__animated animate__fadeInUp animate__faster">
                    <div class="p-4 border-b border-white/5 mb-2">
                        <p id="user-full-name" class="font-bold text-xs truncate text-slate-400"></p>
                    </div>
                    <button onclick="openGradePicker()" class="w-full text-right p-3 hover:bg-white/5 rounded-xl text-xs font-black flex items-center gap-2"><i class="fas fa-layer-group text-[#c5a059]"></i> ØªØºÙŠÙŠØ± Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</button>
                    <button onclick="checkAdmin()" class="w-full text-right p-3 hover:bg-red-500/10 rounded-xl text-xs font-black text-red-400 flex items-center gap-2"><i class="fas fa-user-shield"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯Ø±Ø³</button>
                    <button onclick="logout()" class="w-full text-right p-3 hover:bg-white/5 rounded-xl text-xs font-black text-slate-500 mt-2 flex items-center gap-2"><i class="fas fa-power-off"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
                </div>
            </div>

            <div class="hidden sm:block">
                <span id="grade-badge" class="bg-[#c5a059]/10 text-[#c5a059] px-4 py-1.5 rounded-xl text-[10px] font-black border border-[#c5a059]/30"></span>
            </div>

            <h2 class="font-black text-xl tracking-tighter italic">AL-SHERBINY <span class="text-[#c5a059]">ACADEMY</span></h2>
        </div>
    </header>

    <div id="grade-picker" class="fixed inset-0 z-[8000] bg-[#080c14] hidden flex flex-col items-center justify-center p-6">
        <h3 class="text-2xl font-black mb-12 animate__animated animate__fadeInDown text-center">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ.. Ø§Ø®ØªØ± ØµÙÙƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ ğŸ§ª</h3>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-6 w-full max-w-4xl">
            <button onclick="selectGrade('1-mid', 'Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ')" class="lesson-card p-10 text-center animate__animated animate__fadeInUp" style="animation-delay: 0.1s">
                <i class="fas fa-vial text-3xl text-blue-400 mb-4"></i>
                <p class="font-black text-sm">Ø£ÙˆÙ„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</p>
            </button>
            <button onclick="selectGrade('2-mid', 'Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ')" class="lesson-card p-10 text-center animate__animated animate__fadeInUp" style="animation-delay: 0.2s">
                <i class="fas fa-flask text-3xl text-blue-400 mb-4"></i>
                <p class="font-black text-sm">ØªØ§Ù†ÙŠØ© Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</p>
            </button>
            <button onclick="selectGrade('3-mid', 'Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ')" class="lesson-card p-10 text-center animate__animated animate__fadeInUp" style="animation-delay: 0.3s">
                <i class="fas fa-atom text-3xl text-blue-400 mb-4"></i>
                <p class="font-black text-sm">ØªØ§Ù„ØªØ© Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</p>
            </button>
            <button onclick="selectGrade('1-sec', 'Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ')" class="lesson-card p-10 text-center border-[#c5a059]/20 animate__animated animate__fadeInUp" style="animation-delay: 0.4s">
                <i class="fas fa-dna text-3xl text-amber-500 mb-4"></i>
                <p class="font-black text-[#c5a059] text-sm">Ø£ÙˆÙ„Ù‰ Ø«Ø§Ù†ÙˆÙŠ</p>
            </button>
            <button onclick="selectGrade('2-sec', 'Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ')" class="lesson-card p-10 text-center border-[#c5a059]/20 animate__animated animate__fadeInUp" style="animation-delay: 0.5s">
                <i class="fas fa-microscope text-3xl text-amber-500 mb-4"></i>
                <p class="font-black text-[#c5a059] text-sm">ØªØ§Ù†ÙŠØ© Ø«Ø§Ù†ÙˆÙŠ</p>
            </button>
            <button onclick="selectGrade('3-sec', 'Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ')" class="lesson-card p-10 text-center border-[#c5a059]/20 animate__animated animate__fadeInUp" style="animation-delay: 0.6s">
                <i class="fas fa-brain text-3xl text-amber-500 mb-4"></i>
                <p class="font-black text-[#c5a059] text-sm">ØªØ§Ù„ØªØ© Ø«Ø§Ù†ÙˆÙŠ</p>
            </button>
        </div>
    </div>

    <main id="app-content" class="hidden container mx-auto px-6 py-12">
        <div class="mb-10 animate__animated animate__fadeInLeft">
            <h3 class="text-2xl font-black pr-4 border-r-4 border-[#c5a059]">Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ùƒ</h3>
        </div>
        <div id="lesson-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
    </main>

    <script>
        const config = {
            apiKey: "AIzaSyAyIsaApHUjEQWJgGhCom25pUj8Bm9LYyQ",
            authDomain: "sherbiny-academy.firebaseapp.com",
            projectId: "sherbiny-academy",
            storageBucket: "sherbiny-academy.firebasestorage.app",
            messagingSenderId: "349228281326",
            appId: "1:349228281326:web:ffbbf1eb5927b50d13f2ff"
        };
        firebase.initializeApp(config);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let currentGrade = localStorage.getItem('s_grade');

        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('app-header').classList.remove('hidden');
                document.getElementById('app-content').classList.remove('hidden');
                document.getElementById('user-avatar').src = user.photoURL;
                document.getElementById('user-first-name').innerText = user.displayName.split(' ')[0];
                document.getElementById('user-full-name').innerText = user.displayName;

                if(!currentGrade) openGradePicker(); else selectGrade(currentGrade, getGradeName(currentGrade));
            } else {
                document.getElementById('auth-screen').style.display = 'flex';
            }
        });

        async function login() {
            const p = new firebase.auth.GoogleAuthProvider();
            try { await auth.signInWithPopup(p); } catch(e) { auth.signInWithRedirect(p); }
        }

        function logout() { auth.signOut(); localStorage.removeItem('s_grade'); location.reload(); }
        function openGradePicker() { document.getElementById('grade-picker').classList.remove('hidden'); }
        function toggleMenu() {
            const m = document.getElementById('drop-menu');
            m.style.display = (m.style.display === 'block') ? 'none' : 'block';
        }

        function selectGrade(id, name) {
            currentGrade = id;
            localStorage.setItem('s_grade', id);
            document.getElementById('grade-badge').innerText = name;
            document.getElementById('grade-picker').classList.add('hidden');
            document.getElementById('drop-menu').style.display = 'none';
            loadLessons(id);
        }

        function getGradeName(id) {
            const map = {'1-mid':'Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ','2-mid':'Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ','3-mid':'Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ','1-sec':'Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ','2-sec':'Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ','3-sec':'Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ'};
            return map[id];
        }

        function loadLessons(gradeId) {
            const grid = document.getElementById('lesson-grid');
            grid.innerHTML = '<div class="col-span-full text-center py-20"><span class="loader"></span></div>';
            
            db.collection("lessons").where("grade", "==", gradeId).onSnapshot(snap => {
                let html = "";
                let data = [];
                snap.forEach(d => data.push(d.data()));
                data.sort((a,b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));

                data.forEach((item, i) => {
                    html += `
                        <div class="lesson-card p-6 animate__animated animate__fadeInUp" style="animation-delay: ${i*0.1}s">
                            <div class="h-44 bg-slate-900 rounded-3xl mb-6 flex items-center justify-center relative overflow-hidden group">
                                <i class="fas fa-play text-4xl opacity-10 group-hover:opacity-40 transition"></i>
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                                <span class="absolute bottom-4 right-4 bg-white/10 backdrop-blur-md text-[9px] font-black px-3 py-1 rounded-full border border-white/10 tracking-widest uppercase">CHEMISTRY</span>
                            </div>
                            <h4 class="font-bold text-sm mb-6 h-12 overflow-hidden leading-relaxed text-slate-200">${item.title}</h4>
                            <button onclick="window.open('${item.url}')" class="btn-gold w-full py-4 rounded-2xl text-xs font-black shadow-lg">Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¯Ø±Ø³</button>
                        </div>
                    `;
                });
                grid.innerHTML = html || `<div class="col-span-full text-center py-20 opacity-30 font-bold">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù€ ${getGradeName(gradeId)}</div>`;
            });
        }

        function checkAdmin() { if(prompt("ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:") === "123") alert("Ø³ÙŠØªÙ… ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…..."); }
    </script>
</body>
</html>
