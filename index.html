<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>ุฃูุงุฏูููุฉ ุงูุดุฑุจููู ููููููุงุก</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="refresh-indicator">
    <i class="fas fa-sync fa-spin"></i> ุฌุงุฑู ุงูุชุญุฏูุซ...
</div>

<div id="splash-screen" class="fixed inset-0 z-[10000] bg-[#080c14] flex flex-col items-center justify-center transition-opacity duration-700">
    <div class="relative">
        <div class="w-24 h-24 border-2 border-[#c5a059]/20 rounded-full animate-ping"></div>
        <i class="fas fa-atom text-[#c5a059] text-5xl absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"></i>
    </div>
    <h1 class="mt-8 text-white font-black tracking-[0.3em] text-sm animate-pulse">AL-SHERBINI ACADEMY</h1>
</div>

<script>
    // ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู ุจุนุฏ ุซุงููุชูู
    window.addEventListener('load', () => {
        setTimeout(() => {
            const splash = document.getElementById('splash-screen');
            splash.style.opacity = '0';
            // ุญุฐู ุงูุนูุตุฑ ูู ุงูุตูุญุฉ ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูุชุฃุซูุฑ ุงูุจุตุฑู
            setTimeout(() => splash.remove(), 500); 
        }, 1000); // ุฎูููุงูุง 1000 ูุนูู ุซุงููุฉ ูุงุญุฏุฉ "ุฎุจุท ูุฒู"
    });
</script>

    <section id="auth-screen" class="fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-[#080c14] p-6 overflow-hidden">
        
        <div class="absolute top-0 left-0 right-0 flex justify-between px-10 pointer-events-none opacity-80">
            <div class="flex flex-col items-center animate__animated animate__fadeInDown">
                <div class="w-[1px] h-20 bg-gray-600/50"></div>
                <i class="fas fa-star text-[#c5a059] text-xl swing-anim"></i>
            </div>
            <div class="mt-4 flex flex-col items-center animate__animated animate__fadeInDown animate__delay-1s">
                <i class="fas fa-moon text-[#c5a059] text-5xl rotate-[-15deg] drop-shadow-[0_0_15px_rgba(197,160,89,0.5)]"></i>
                <p class="text-[#c5a059] text-[10px] font-black mt-2 tracking-[5px] text-center">ุฑูุถุงู ูุฑูู</p>
            </div>
            <div class="flex flex-col items-center animate__animated animate__fadeInDown">
                <div class="w-[1px] h-12 bg-gray-600/50"></div>
                <i class="fas fa-star text-[#c5a059] text-lg swing-anim"></i>
            </div>
        </div>
        <div class="w-full max-w-sm bg-white/5 border border-white/10 rounded-[40px] p-8 backdrop-blur-md animate__animated animate__zoomIn relative z-10">
            
            <div class="w-20 h-20 bg-[#c5a059] rounded-[28px] mx-auto mb-6 flex items-center justify-center shadow-2xl shadow-[#c5a059]/20">
                <i class="fas fa-atom text-3xl text-black animate-spin-slow"></i>
            </div>

            <div class="text-center mb-8">
                <h1 class="text-xl font-black text-white mb-2">ุฃูุงุฏูููุฉ ุงูุดุฑุจููู</h1>
                <p class="text-gray-400 text-xs font-bold">ุจูุงุจุฉ ุงูุชููู ูู ุงูููููุงุก ูุงูุนููู</p>
            </div>

            <button onclick="login()" class="btn-gold w-full py-4 rounded-2xl font-black text-sm flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-lg shadow-[#c5a059]/10">
                <i class="fab fa-google text-lg"></i>
                <span>ุฏุฎูู ุงูููุตุฉ</span>
            </button>

            <div class="mt-10 pt-6 border-t border-white/10 text-center">
                <p class="text-gray-500 text-[10px] font-black mb-1 tracking-widest uppercase">ููุชูุงุตู ูุงูุงุดุชุฑุงู</p>
                
                <p class="text-[#c5a059] text-[9px] font-bold mb-3 animate-pulse">๐ ุงุถุบุท ููุง ููุชุญุฏุซ ูุน ุงููุณุชุฑ ูุจุงุดุฑุฉ ๐</p>
                
                <a href="https://wa.me/201014401852" target="_blank" 
                   class="inline-flex items-center gap-3 bg-[#25D366]/10 hover:bg-[#25D366]/20 border border-[#25D366]/30 px-5 py-2.5 rounded-full transition-all group shadow-lg shadow-[#25D366]/5">
                    
                    <i class="fab fa-whatsapp text-[#25D366] text-xl group-hover:scale-110 transition-transform"></i>
                    
                    <div class="flex flex-col text-right">
                        <span class="text-white text-[11px] font-black group-hover:text-[#25D366] transition-colors">ูุณุชุฑ ูุญูุฏ ุงูุดุฑุจููู</span>
                        <span class="text-[#25D366] text-[12px] font-mono tracking-wider">01014401852</span>
                    </div>
                </a>
            </div>
        </div>

        <div class="mt-8 flex flex-col items-center gap-1 opacity-40">
    <p class="text-gray-600 text-[9px] font-bold tracking-widest uppercase">ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2026</p>
    <p class="text-[#c5a059] text-[10px]" style="font-family: 'Times New Roman', serif; letter-spacing: 2px;">
       Developed by <span class="font-black italic">SALMAN-ALSHORBAGY</span>
    </p>
</div>
    </section>

    <header id="app-header" class="hidden sticky top-0 z-[1000] border-b border-white/5 bg-[#0f172a]/95 backdrop-blur-md px-4 py-2">
        <div class="container mx-auto flex justify-between items-center h-12">
            
            <div class="relative">
                <div class="flex items-center gap-2 cursor-pointer group bg-white/5 hover:bg-white/10 p-1 pr-3 rounded-2xl border border-white/5 transition-all" onclick="toggleMenu()">
                    
                    <span id="user-first-name" class="font-black text-white text-[12px]"></span>
                    
                    <img id="user-avatar" class="w-9 h-9 rounded-xl border border-[#c5a059]/50 object-cover" src="" alt="">
                    
                    <div class="w-7 h-7 rounded-full bg-[#c5a059] flex items-center justify-center relative overflow-hidden shimmer-container">
                        <i class="fas fa-chevron-down text-[10px] text-black relative z-10"></i>
                        <div class="shimmer-light"></div>
                    </div>
                </div>

                <div id="drop-menu" class="hidden absolute right-0 mt-2 w-44 bg-[#111827] border border-white/10 rounded-2xl shadow-2xl p-2 z-[5000] animate__animated animate__fadeInUp">
                    <button onclick="openGradePicker()" class="w-full text-right p-3 hover:bg-white/5 rounded-xl text-[11px] font-black flex items-center gap-3 text-white transition">
                        <i class="fas fa-sync text-[#c5a059]"></i> ุชุบููุฑ ุงูุตู
                    </button>
                    <button onclick="checkAdmin()" class="w-full text-right p-3 hover:bg-red-500/10 rounded-xl text-[11px] font-black text-red-400 flex items-center gap-3 transition">
                        <i class="fas fa-user-shield"></i> ููุญุฉ ุงููุฏุฑุณ
                    </button>
                    <div class="border-t border-white/5 my-1"></div>
                    <button onclick="logout()" class="w-full text-right p-3 hover:bg-white/5 rounded-xl text-[11px] font-black text-gray-400 flex items-center gap-3 transition">
                        <i class="fas fa-power-off text-red-500"></i> ุฎุฑูุฌ
                    </button>
                </div>
            </div>

            <div class="flex flex-col text-left mr-2">
    <h2 class="font-black text-xs md:text-lg text-[#c5a059] italic leading-tight">
        ููุตุฉ ุฃ/ูุญูุฏ ุงูุดุฑุจููู
    </h2>
    <span class="text-[9px] text-white/40 font-bold tracking-[1px] mt-1" 
          style="font-family: 'Arial', sans-serif; border-top: 1px solid rgba(197, 160, 89, 0.2); pt-0.5">
        BY: SALMAN-ALSHORBAGY
    </span>
</div>
        </div>
    </header>

    <div id="grade-picker" class="fixed inset-0 z-[8000] bg-[#080c14] hidden flex flex-col items-center justify-center p-6 text-center overflow-y-auto">
        <h3 class="text-3xl font-black mb-12 animate__animated animate__fadeInDown">ูุฑุญุจุงู ุจู.. ุงุฎุชุฑ ุตูู ุงูุฏุฑุงุณู</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 w-full max-w-5xl animate__animated animate__zoomIn">
            <button onclick="selectGrade('1-mid', 'ุงูุฃูู ุงูุฅุนุฏุงุฏู')" class="p-10 bg-white/5 rounded-[40px] border border-white/10 font-black hover:border-white transition">ุฃููู ุฅุนุฏุงุฏู</button>
            <button onclick="selectGrade('2-mid', 'ุงูุซุงูู ุงูุฅุนุฏุงุฏู')" class="p-10 bg-white/5 rounded-[40px] border border-white/10 font-black hover:border-white transition">ุชุงููุฉ ุฅุนุฏุงุฏู</button>
            <button onclick="selectGrade('3-mid', 'ุงูุซุงูุซ ุงูุฅุนุฏุงุฏู')" class="p-10 bg-white/5 rounded-[40px] border border-white/10 font-black hover:border-white transition">ุชุงูุชุฉ ุฅุนุฏุงุฏู</button>
            <button onclick="selectGrade('1-sec', 'ุงูุฃูู ุงูุซุงููู')" class="p-10 bg-[#c5a059]/10 rounded-[40px] border border-[#c5a059]/30 font-black text-[#c5a059] hover:bg-[#c5a059]/20 transition">ุฃููู ุซุงููู</button>
            <button onclick="selectGrade('2-sec', 'ุงูุซุงูู ุงูุซุงููู')" class="p-10 bg-[#c5a059]/10 rounded-[40px] border border-[#c5a059]/30 font-black text-[#c5a059] hover:bg-[#c5a059]/20 transition">ุชุงููุฉ ุซุงููู</button>
            <button onclick="selectGrade('3-sec', 'ุงูุซุงูุซ ุงูุซุงููู')" class="p-10 bg-[#c5a059]/10 rounded-[40px] border border-[#c5a059]/30 font-black text-[#c5a059] hover:bg-[#c5a059]/20 transition">ุชุงูุชุฉ ุซุงููู</button>
        </div>
    </div>

    <div id="admin-modal" class="modal-overlay hidden" style="display:none;">
        <div class="admin-box animate__animated animate__zoomIn relative">
            <div class="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
                <h3 class="text-lg md:text-2xl font-black text-[#c5a059]">ููุญุฉ ุงูุชุญูู โ๏ธ</h3>
                <i onclick="closeAdmin()" class="fas fa-times-circle text-2xl md:text-4xl cursor-pointer text-slate-500 hover:text-white transition"></i>
            </div>

            <div class="flex gap-2 mb-6 p-1 bg-black/40 rounded-2xl border border-white/5">
                <button onclick="switchTab('lessons')" id="btn-tab-lessons" 
        class="tab-btn active flex-1 py-3 rounded-xl font-black text-[11px] md:text-sm transition-all duration-300">
    ๐ฅ ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ
</button>
                <button onclick="switchTab('users')" id="btn-tab-users" 
        class="tab-btn flex-1 py-3 rounded-xl font-black text-[11px] md:text-sm transition-all duration-300">
    ๐ ุตูุงุญูุงุช ุงููุตูู
</button>
            </div>

            <div id="section-lessons">
                <div class="grid grid-cols-1 gap-4 bg-[#080c14] p-5 md:p-8 rounded-[25px] border border-white/5 shadow-inner mb-8">
                    <h4 class="font-black text-sm md:text-base mb-2 text-[#c5a059]">ุฑูุน ูุญุงุถุฑุฉ ุฌุฏูุฏุฉ:</h4>
                    <input type="text" id="v-title" placeholder="ุงุณู ุงูุฏุฑุณ" class="p-5 bg-white/5 rounded-2xl border border-white/10 outline-none focus:border-[#c5a059]">
                    <input type="text" id="v-url" placeholder="ุฑุงุจุท ููุชููุจ ุฃู ุฌูุฌู ุฏุฑุงูู" class="p-5 bg-white/5 rounded-2xl border border-white/10 outline-none focus:border-[#c5a059]">
                    <select id="v-grade" class="p-5 bg-[#111827] text-white rounded-2xl border border-white/10 outline-none font-bold">
                        <option value="1-mid">ุงูุฃูู ุงูุฅุนุฏุงุฏู</option>
                        <option value="2-mid">ุงูุซุงูู ุงูุฅุนุฏุงุฏู</option>
                        <option value="3-mid">ุงูุซุงูุซ ุงูุฅุนุฏุงุฏู</option>
                        <option value="1-sec">ุงูุฃูู ุงูุซุงููู</option>
                        <option value="2-sec">ุงูุซุงูู ุงูุซุงููู</option>
                        <option value="3-sec">ุงูุซุงูุซ ุงูุซุงููู</option>
                    </select>
                    <button onclick="publish()" id="pub-btn" class="btn-gold p-5 rounded-2xl font-black text-lg">ูุดุฑ ุงูุฏุฑุณ ุงูุขู ๐</button>
                </div>

                <div class="delete-section">
                    <h4 class="font-black text-red-500 text-xl mb-8 flex items-center gap-3"><i class="fas fa-trash-alt"></i> ูุฑูุฒ ุญุฐู ุงููุญุงุถุฑุงุช</h4>
                    <div id="admin-lessons-list" class="space-y-4 max-h-[400px] overflow-y-auto pr-2"></div>
                </div>
            </div>

            <div id="section-users" class="hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-black/30 p-6 rounded-3xl border border-white/5">
                        <label class="block text-gray-400 text-sm mb-2 text-right">ุฅูููู ุงููุณุชุฎุฏู (Gmail):</label>
                        <input type="email" id="new-user-email" placeholder="example@gmail.com" 
                            class="w-full bg-white/5 border border-white/10 p-4 rounded-xl mb-4 text-white focus:outline-none focus:border-blue-500 text-left">
                        
                        <label class="block text-gray-400 text-sm mb-2 text-right">ููุน ุงูุญุณุงุจ:</label>
                        <select id="new-user-role" class="w-full bg-[#111827] border border-white/10 p-4 rounded-xl mb-6 text-white">
                            <option value="student">๐ ุทุงูุจ ููุชุธู</option>
                            <option value="teacher">๐ก๏ธ ูุฏุฑุณ ูุณุงุนุฏ</option>
                            <option value="master">๐ ูุดุฑู ุนุงู</option>
                        </select>

                        <button id="add-user-btn" onclick="addUser()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-black p-4 rounded-xl transition shadow-lg shadow-blue-600/20">
                            ุฅุถุงูุฉ ุงูุฅูููู ุงูุขู +
                        </button>
                    </div>

                    <div class="bg-black/30 p-6 rounded-3xl border border-white/5">
                        <label class="block text-gray-400 text-sm mb-4 text-right italic">ูุงุฆูุฉ ุงูุชุญูู ูู ุงูุฑุชุจ:</label>
                        <div id="admin-users-list" class="max-h-[400px] overflow-y-auto space-y-2 pr-2">
                             </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="video-player-modal" onclick="closePlayer()">
        <div class="video-container animate__animated animate__zoomIn" onclick="event.stopPropagation()">
            <iframe id="main-video-frame" src="" frameborder="0" 
                allow="autoplay; fullscreen; picture-in-picture;" 
                allowfullscreen webkitallowfullscreen mozallowfullscreen scrolling="yes"></iframe>
        </div>
        <button class="absolute top-8 right-8 text-white text-5xl hover:text-red-500 transition" onclick="closePlayer()">&times;</button>
    </div>

    <main id="app-content" class="hidden container mx-auto px-4 py-6 md:px-6 md:py-12">
        <div class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-12 border-r-8 border-[#c5a059] pr-6">
           <h3 id="grade-title" class="text-lg md:text-3xl font-black">ุงููุญุงุถุฑุงุช</h3>
            
            <div class="relative w-full md:w-80">
                <span class="absolute inset-y-0 right-0 flex items-center pr-4">
                    <i class="fas fa-search text-[#c5a059]"></i>
                </span>
                <input 
                    type="text" 
                    id="search-input" 
                    onkeyup="filterVideos()" 
                    placeholder="ุงุจุญุซ ุนู ุฏุฑุณ ูุนูู..." 
                    class="w-full bg-white/5 border border-white/10 text-white text-sm rounded-2xl py-3 pr-12 pl-4 outline-none focus:border-[#c5a059] transition-all"
                >
            </div>
        </div>
        
        <div id="lesson-grid" class="grid-layout"></div>
    </main>

    <script src="firebase-config.js"></script>

    <template id="lesson-card-template">
        <div class="lesson-card animate__animated animate__fadeIn">
            <div class="card-media-box"></div> 
            
            <div class="card-info">
                <h4 class="lesson-name font-black text-white text-center"></h4>
                <button class="play-btn btn-gold w-full py-2 rounded-lg text-xs font-black">
                    ูุดุงูุฏุฉ ุงููุญุงุถุฑุฉ ุงูุขู <i class="fas fa-play-circle mr-1"></i>
                </button>
            </div>
        </div>
    </template>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="app.js"></script>
</body>
</html>